> __该模块实现在`Spring Boot`项目中`Apollo`配置的自动加载__

---

## i. 功能
- 自动加载`Apollo`配置到`Spring`上下文
- `Apollo`配置自动绑定到`Spring Bean`属性

---

## ii. 使用

### 1. 依赖

__1.1 引入`maven`依赖__

``` xml
<dependency>
    <groupId>org.s3s3l.yggdrasil</groupId>
    <artifactId>yggdrasil-apollo-spring-boot-starter</artifactId>
</dependency>
```

---

### 2. 注解和配置文件

__2.1 在`application.yml`中加入相关配置__

``` yaml
yggdrasil:
  apollo:
    enable: true # 组件开关
    app-id: ${your-project-name} # APPID
    docs:
    - name: ${your-apollo-name-space} # 需要加载的Name space
      format: properties # 文件格式，支持： properties | xml | json | yml | yaml
      location:
        target: "" # 目标配置
        type: last # 与目标配置的相对位置，决定配置读取的优先级，越靠前配置优先级越高，支持： before | after | first | last
      field-doc: # 针对properties类型的配置，可以把其中一个字段的内容作为一个文档处理，可空。为空时properties类型的配置将整体作为一个文档处理
      - key: ${your-field-key} # 字段名
        default-key: ${your-default-field-key} # 默认配置字段名，会以较低的优先级去填补key中缺失的字段，可空
        format: yaml # 格式
      processors:
      - ${your-ConfigFileChangedProcessor} # 配置内容发生变化时会按顺序调用，可以通过实现ConfigFileChangedProcessor接口来定制你自己的处理过程
```

__2.2 启用`Spring Boot`的自动配置功能__

- 在启动类上加上`@EnableAutoConfiguration`注解或者使用`@SpringBootApplication`注解

__2.3 在`Bean`中注入属性__

``` java
@ApolloConfiguration // 从Apollo注入配置，请加上此注解
@Configuration
@ConfigurationProperties(prefix = "your prefix")
public class YourConfiguration {
    private String localProperty;
    private String apolloProperty;
}
```

---

### 3. 在服务中使用

__3.1 使用注入了属性的`Bean`__

``` java
@Service
public class YourService {
    @Autowired
    private YourConfiguration yourConfiguration;
}
```

---

## iii. 子模块
- `DocumentProcessException`
    - 文档处理异常
- `ApolloConfiguration`
    - `Apollo`配置
- `ApolloAutoConfigure`
    - `Apollo`自动配置
- __feature__
    - `ProcessorContext`
        - `Processor`上下文
    - `PropertySourceHelper`
        - 属性数据源操作工具
    - `StringToObjectConverter`
        - 字符串到对象转化器
    - `TreeNodeConverter`
        - 树形结构转化器

